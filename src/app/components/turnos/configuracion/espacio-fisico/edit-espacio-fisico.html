<plex-layout>
    <plex-layout-main>
        <form #formulario="ngForm">
            <div class="row">
                <div class="col-6">
                    <plex-text [(ngModel)]="modelo.nombre" [required]="true" id="nombre" name="nombre" label="Nombre" placeholder="Ingrese el nombre del espacio físico"
                        required>
                    </plex-text>
                </div>
                <div class="col-6">
                    <plex-text [(ngModel)]="modelo.descripcion" name="descripcion" label="Descripción" placeholder="Ingrese la descripción del espacio físico">
                    </plex-text>
                </div>

            </div>
            <div class="row">
                <div class="col-6">
                    <plex-select [(ngModel)]="modelo.edificio" [required]="true" name="edificio" (getData)="loadEdificios($event)" label="Edificio"
                        labelField="descripcion">
                    </plex-select>
                </div>
                <div class="col-6">
                    <plex-select [(ngModel)]="modelo.servicio" name="servicio" (getData)="loadServicios($event)" label="Servicio" labelField="nombre">
                    </plex-select>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <plex-select [(ngModel)]="modelo.sector" name="sector" (getData)="loadSectores($event)" label="Sector" labelField="nombre">
                    </plex-select>
                </div>
                <div class="col-6">
                    <plex-text [(ngModel)]="modelo.detalle" name="detalle" label="Detalle Ubicación">
                    </plex-text>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <plex-select [(ngModel)]="modelo.estado" label="Estado actual" name="estado" (getData)="loadEstados($event)"></plex-select>
                </div>
                <div class="col-6">
                    <br>
                    <plex-bool [(ngModel)]="modelo.activo" label="Activo" name="activo"></plex-bool>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <label>Agregar Equipamiento</label>
                    <snomed-buscar [tipoBusqueda]="tipoBusqueda" (onSearch)="agregarEquipamiento($event)"></snomed-buscar>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <strong>Equipamiento actual</strong>
                    <br>
                    <span *ngFor="let eq of modelo.equipamiento" class="badge badge-info badge-equipamiento">
                        {{ eq.term }}
                        <span class="float-right hover" (click)="eliminarEquipamiento(eq)">
                            <i class="mdi mdi-close-box-outline"></i>
                        </span>
                    </span>
                    <div class="badge badge-warning" *ngIf="modelo.equipamiento.length === 0">
                        Sin equipamiento definido
                    </div>
                </div>
            </div>
        </form>

    </plex-layout-main>
    <plex-layout-footer>
        <plex-button type="danger" label="Cancelar" position="left" (click)="onCancel()"></plex-button>

        <plex-button type="success" label="Guardar" position="right" [validateForm]="formulario" (click)="guardar($event)"></plex-button>
    </plex-layout-footer>
</plex-layout>
