<plex-title main [titulo]="'Referir paciente'">
    <plex-button size="sm" type="danger" [icon]="'close'" (click)="cerrar()">
    </plex-button>
</plex-title>
<div class="mt-3">
    <div class="row">
        <div class="col-12 text-left">
            <b>Paciente</b>
            <h5>
                <span class="blue"> {{ prestacionSeleccionada?.paciente | nombre }}
                </span>
            </h5>
        </div>
    </div>
    <div class="row">
        <div class="col-6 text-left">
            <b>Fecha Solicitud</b>
            <br> {{ prestacionSeleccionada?.solicitud.fecha | fecha }}
        </div>
    </div>
    <div class="row">
        <div class="col">
            <span *ngIf="prestacionSeleccionada.solicitud.tipoPrestacionOrigen?.term">
                <b>Tipo de Prestación Origen</b>
                <br> {{ prestacionSeleccionada.solicitud.tipoPrestacionOrigen?.term }}
            </span>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <span *ngIf="prestacionSeleccionada.solicitud.organizacionOrigen?.nombre">
                <b>Organización Origen</b>
                <br> {{ prestacionSeleccionada.solicitud.organizacionOrigen?.nombre }}
            </span>
        </div>
    </div>
    <div class="row" *ngIf="mostrarMotivo()">
        <div class="col-12">
            <hr>
            <b>Motivo</b>
            <br>
            <span>
                {{prestacionSeleccionada.solicitud.registros[0].valor.solicitudPrestacion.motivo}}
            </span>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <hr>
            <b>Creado por</b>
            <br>
            <span>{{prestacionSeleccionada?.createdBy?.nombreCompleto}}</span>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <b>Fecha de Creación</b>
            <br>
            <span>{{prestacionSeleccionada.createdAt | date: "dd/MM/yyyy 'a las' HH:mm " }}</span>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-12">
            <plex-text label="Observaciones" multiline="true" name="observaciones" [(ngModel)]="observaciones">
            </plex-text>
        </div>
    </div>
    <ng-container>
        <div class="row">
            <div class="col-12">
                <plex-select [(ngModel)]="organizacionDestino" [data]="organizacionesDestino" name="organizacionOrigen"
                             label="Organización destino" labelField="nombre" [required]="true"
                             (change)="onSelectOrganizacionDestino()">
                </plex-select>
            </div>
            <div class="col-12">
                <plex-select [(ngModel)]="tipoPrestacionDestino" name="tipoPrestacionDestino"
                             [data]="tipoPrestacionesDestinoData" label="Tipo de Prestación Solicitada"
                             placeholder="Tipos de Prestación solicitada" [required]="true">
                </plex-select>
            </div>
            <div class="col-12">
                <plex-select [(ngModel)]="profesionalDestino" label="Profesional destino" name="profesional"
                             (getData)="loadProfesionales($event)" placeholder="Escriba el apellido de un Profesional"
                             labelField="apellido + ' ' + nombre">
                </plex-select>
            </div>
        </div>
    </ng-container>
    <div class="row mt-3">
        <div class="col-6 text-left">
            <plex-button type="danger" (click)="cancelar()">Cancelar</plex-button>
        </div>
        <div class="col-6 text-right">
            <plex-button type="success" (click)="confirmar()"
                         [disabled]="(!(tipoPrestacionDestino && organizacionDestino))">
                Confirmar</plex-button>
        </div>
    </div>
</div>