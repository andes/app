<div>
    <plex-select [(ngModel)]="prestaciones" (change)="refreshSelection($event,'prestaciones')" (getData)="loadPrestaciones($event)"
        name="prestaciones" label="Prestación" ngModelOptions="{standalone: true}">
    </plex-select>
</div>

<table class="table-bordered">
    <thead>
        <tr>
            <th>Fecha</th>
            <th>Ubicación</th>
            <th>Responsable</th>
            <th>Historia Clínica</th>
            <th></th>
        </tr>
    </thead>
    <tbody *ngFor="let carpeta of carpetas">
        <tr>
            <td>
                {{today | date: 'dd/mm/yyyy'}}
            </td>
            <td>{{carpeta.estado}}</td>
            <!-- <td *ngIf="!carpeta.datosPrestamo.turno.profesional[0][0]; else prof">Sin Profesional
            </td> -->
             <td>
            {{carpeta.datosPrestamo.turno.profesional[0][0]?.apellido}}, {{carpeta.datosPrestamo.turno.profesional[0][0]?.nombre}}
            </td> 
            <td>
                <b>
                    {{carpeta.datosPrestamo.turno.paciente.carpetaEfectores[0].nroCarpeta}} - {{carpeta.datosPrestamo.turno.paciente.apellido}},
                    {{carpeta.datosPrestamo.turno.paciente.nombre}}
                </b>
                <br/> Documento:
                <b>{{carpeta.datosPrestamo.turno.paciente.documento}}</b>
            </td>
            <td *ngIf="carpeta.estado == 'En archivo'">
                <plex-button type="primary" label="Prestar" (click)="prestar(carpeta)">
                </plex-button>
            </td>
            <td *ngIf="carpeta.estado == 'Prestada'">
                <plex-button type="primary" label="Devolver" (click)="devolver(carpeta)">
                </plex-button>
            </td>
        </tr>

    </tbody>
</table>
