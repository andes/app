<plex-layout>
    <plex-layout-main>
        <header class="logo-container mt-3" justify responsive>
            <div justify="start">
                <div svgLogo></div>
                <div svgAcronimo></div>
                <div [class]="provinciaClass">{{ provincia }}</div>
            </div>
            <div class="bienvenida mr-4">
                <div class="hola">
                    Hola <b>{{ auth.usuario.nombre }}</b>
                </div>
                <div class="mensaje">
                    ¿En qué vas a trabajar hoy?
                </div>
            </div>
        </header>
        <main>
            <plex-loader *ngIf="loading" type="linear"></plex-loader>
            <div *ngIf="!denied && !loading" class="modulos" justify>
                <div *ngFor="let modulo of modulos">

                    <div class="modulo">
                        <div class="principal {{ modulo.class }}">
                            <b class="titulo">{{ modulo.nombre }}
                                <span class="hover" *ngIf="novedades[modulo._id]?.length > 0"
                                      hint="Novedades del módulo {{ modulo.nombre }}" detach="true" icon="bell"
                                      (click)="irANovedades(modulo._id)"></span>
                            </b>
                            <div class="descripcion">{{modulo.descripcion}}</div>
                        </div>
                        <div class="submodulos d-flex align-items-start">
                            <ng-container *ngFor="let submodulo of modulo.submodulos">
                                <div class="submodulo {{submodulo.class}} hover" (click)="redirect(modulo)">
                                    <plex-icon [name]="submodulo.icono" size="lg"></plex-icon>
                                    <div class="titulo" [innerHTML]="submodulo.nombre"></div>
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>

                <div class="divisor"></div>

                <div *ngFor="let seccion of secciones" class="secciones">
                    <div class="seccion hover" (click)="redirect(seccion)">
                        <div class="principal {{ seccion.class }}">
                            <div class="band"></div>
                            <plex-icon [name]="seccion.icono" size="lg"></plex-icon>
                        </div>
                        <div class="titulo ml-2" [innerHTML]="seccion.nombre"></div>
                    </div>
                </div>
            </div>
            <div *ngIf="denied && !loading">
                <div>
                    <div class="boton color-amarillo">
                        <i class="icono mdi mdi-alert"></i>
                        <div>ATENCIÓN</div>
                        <div>PERMISOS DE APLICACIONES</div>
                        <div>Ud. no posee permisos para ningún módulo de ANDES</div>
                    </div>
                </div>
            </div>
        </main>
    </plex-layout-main>
</plex-layout>