<plex-layout>
    <plex-layout-main>
        <header class="logo-container mt-3 border-1" justify responsive>
            <div justify="start">
                <div svgLogo></div>
                <div svgAcronimo></div>
                <div [class]="provinciaClass">{{ provincia }}</div>
            </div>
            <div class="bienvenida mr-4">
                <div class="hola">
                    Hola <b>{{ auth.usuario.nombre }}</b>
                </div>
                <div *ngIf="!denied" class="mensaje">
                    ¿En qué vas a trabajar hoy?
                </div>
                <div *ngIf="denied" class="mensaje">
                    ¡Bienvenida/o a ANDES!
                </div>
            </div>

        </header>
        <hr>
        <main>
            <plex-loader *ngIf="loading" type="linear"></plex-loader>
            <div *ngIf="!denied && !loading" class="modulos" justify>
                <div *ngFor="let modulo of modulos">

                    <div class="modulo">
                        <div class="principal {{ modulo.class }}">
                            <b class="titulo">{{ modulo.nombre }}
                                <span class="hover" *ngIf="novedades[modulo._id]?.length > 0" hintType="info"
                                      hint="Novedades del módulo {{ modulo.nombre }}" detach="both" icon="bell"
                                      (click)="irANovedades(modulo._id)"></span>
                            </b>
                            <div class="descripcion">{{modulo.descripcion}}</div>
                        </div>
                        <div class="submodulos d-flex align-items-start">
                            <ng-container *ngFor="let submodulo of modulo.submodulos">
                                <div class="submodulo {{submodulo.class}} hover" (click)="redirect(modulo)">
                                    <plex-icon [name]="submodulo.icono" size="lg"></plex-icon>
                                    <div class="titulo" [innerHTML]="submodulo.nombre"></div>
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
            <div class="secciones">
                <ng-container *ngFor="let seccion of secciones">
                    <div class="seccion hover" (click)="redirect(seccion)">
                        <div class="principal {{ seccion.class }}">
                            <div class="band"></div>
                            <plex-icon class="main" [name]="seccion.icono" size="lg"></plex-icon>
                            <plex-icon class="animated" name="chevron-right" size="lg"></plex-icon>
                        </div>
                        <div class="secundario">
                            <div class="titulo ml-2">{{seccion.nombre}}</div>
                            <div class="subtitulo ml-2">{{seccion.subtitulo}}</div>
                        </div>
                    </div>
                </ng-container>
            </div>
        </main>
        <div *ngIf="denied && !loading" class="w-100 h-75 d-flex justify-content-center align-items-center">
            <main role="main" class="inner">
                <plex-label icon="llave" type="warning" size="xl" direction="column"
                            titulo="No tenés permisos para ningún módulo de ANDES"
                            subtitulo="Ponete en contacto con el informático local o coordinador de área">
                </plex-label>
            </main>
        </div>
    </plex-layout-main>
</plex-layout>