<plex-layout main="{{ sidebar }}">
    <plex-layout-main>
        <paciente-busqueda [hostComponent]="'mpi'" [create]="true" [returnScannedPatient]="true" [editing]="true"
                           (searchEnd)="onSearchEnd($event.pacientes,$event.escaneado)" (selected)="toVisualize($event)"
                           (edit)="toEdit($event)">
        </paciente-busqueda>
    </plex-layout-main>


    <plex-layout-sidebar [type]="'invert'">
        <!-- historial de bÃºsquedas -->
        <ng-container *ngIf="!showDetallePaciente">
            <plex-title size="md" titulo="Busquedas recientes"></plex-title>

            <paciente-listado [pacientes]="historialSeleccionados" (selected)="toEdit($event)">
            </paciente-listado>
        </ng-container>

        <!-- detalles del paciente a visualizar -->
        <ng-container *ngIf="showDetallePaciente">
            <plex-title titulo="Detalle paciente" size="sm">
                <plex-button type="warning" size="sm" label="Editar Datos" (click)="toEdit(paciente)"></plex-button>
                <plex-button type="danger" icon="close" class="ml-2" size="sm" (click)="closeDetallePaciente()">
                </plex-button>
            </plex-title>

            <paciente-detalle [paciente]="paciente" [showRelaciones]="true" reload="true" [fields]="fieldsDetalle">
            </paciente-detalle>
        </ng-container>

    </plex-layout-sidebar>
</plex-layout>