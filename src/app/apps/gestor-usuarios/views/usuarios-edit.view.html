<plex-layout [main]="4">
    <plex-layout-main>
        <plex-title [titulo]="orgName" size="sm">
            <plex-button size="sm" label="VOLVER" (click)="volver()" type="danger"></plex-button>
        </plex-title>
        <ng-container *ngIf="user$ | async as user">
            <gestor-usuarios-usuario-detalle [usuario]="user"></gestor-usuarios-usuario-detalle>
        </ng-container>
        <plex-title titulo="Perfiles habilitados"></plex-title>
        <div class="list-group mt-2" *ngIf="arbolPermisos.length">
            <ng-container *ngFor="let perfil of perfiles">
                <div justify class="list-group-item" *ngIf="habilitados[perfil.id] !== undefined">
                    {{perfil.nombre}}
                    <plex-bool [(ngModel)]="habilitados[perfil.id]" (change)="onChangePerfil($event, perfil)">
                    </plex-bool>
                </div>
            </ng-container>
        </div>
    </plex-layout-main>
    <plex-layout-sidebar>
        <plex-title main titulo="Permisos del usuario">
            <plex-button type="success" size="sm" (click)="grabar()">
                GUARDAR
            </plex-button>
            <plex-button type="danger" size="sm" (click)="borrar()">
                <plex-icon name="delete"></plex-icon>
            </plex-button>
            <plex-button type="info" size="sm" (click)="copy()" title="Copiar permisos" titlePosition="left">
                <plex-icon name="content-copy"></plex-icon>
            </plex-button>
            <plex-button type="info" size="sm" (click)="paste()" title="Pegar permisos" titlePosition="left"
                         *ngIf="permisosService.hasCopy()">
                <plex-icon name="content-paste"></plex-icon>
            </plex-button>
        </plex-title>
        <arbol-permisos [permisos]="arbolPermisos" [userPermissions]="permisos$ | async" (change)="onChange()">
        </arbol-permisos>
    </plex-layout-sidebar>
</plex-layout>