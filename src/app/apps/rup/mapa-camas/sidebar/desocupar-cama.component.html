<div>
    <form #formReparada="ngForm">
        <plex-title justify [titulo]="(!prestacion) ? 'Desocupar cama' : 'Cambio de cama'">
            <plex-button icon="arrow-left" type="danger" size="sm" (click)="cancelar()">
            </plex-button>
        </plex-title>
        <fieldset>
            <ng-container *ngIf="prestacion">
                <div class="row">
                    <div class="col">
                        <plex-datetime type="datetime" label="Fecha y hora de cambio de cama" [(ngModel)]="fecha"
                                       name="fechaCambio" required (change)="verificarFecha($event.value)">
                        </plex-datetime>
                    </div>
                </div>
                <ng-container *ngIf="!fechaValida">
                    <div class="row-md">
                        <div class="alert alert-danger">
                            {{mensajeError}}
                        </div>
                    </div>
                </ng-container>
                <ng-container *ngIf="cama">
                    <div class="row">
                        <div class="col">
                            <br>
                            <b>Cama utilizada en esa fecha:</b>
                            <p>{{cama.nombre}}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <br>
                            <b>Unidad organizativa:</b>
                            <p>{{cama.unidadOrganizativa.term}}</p>
                        </div>
                    </div>
                </ng-container>
            </ng-container>
            <label>¿Qué desea hacer?</label>
            <plex-button label="Cambiar cama" type="primary" size="block"
                         [disabled]="(!fechaValida) || !(camasMismaUO.length > 0)" (click)="cambiarCama(false)">
            </plex-button>
            <ng-container *ngIf="!(camasMismaUO.length > 0)">
                <div class="row-md">
                    <div class="alert alert-warning">
                        No hay camas disponibles en la unidad organizativa actual.
                    </div>
                </div>
            </ng-container>
            <plex-button *ngIf="!prestacion" label="Egresar paciente" type="warning" size="block"
                         (click)="egresarPaciente()">
            </plex-button>
            <plex-button label="Cambiar de unidad organizativa" type="secondary" size="block"
                         [disabled]="(!fechaValida) || !(camasDistintaUO.length > 0)" (click)="cambiarCama(true)">
            </plex-button>
            <ng-container *ngIf="!(camasDistintaUO.length > 0)">
                <div class="row-md">
                    <div class="alert alert-warning">
                        No hay camas disponibles en ninguna unidad organizativa.
                    </div>
                </div>
            </ng-container>
        </fieldset>
    </form>
</div>