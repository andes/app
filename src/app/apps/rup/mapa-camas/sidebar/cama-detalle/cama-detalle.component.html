<plex-tabs size="full" [activeIndex]="tabIndex" (change)="cambiarTab($event)" *ngIf="cama$ | async as cama">
    <plex-tab label="CAMA">
        <ng-container *ngIf="estadoCama$ | async as estadoCama">
            <plex-title titulo="DATOS DE CAMA">
                <ng-container *ngFor="let relacion of relaciones$ | async">
                    <ng-container *ngIf="capa === 'estadistica' && relacion.origen === 'ocupada'">
                        <ng-container *ngIf="puedeDesocupar$ | async as puedeDesocupar">
                            <plex-button [icon]="relacion.icon" [type]="relacion.color" info="No se puede desocupar"
                                         size="sm" [disabled]="puedeDesocupar === 'noPuede'"
                                         (click)="accion(relacion, $event)">
                            </plex-button>
                        </ng-container>
                    </ng-container>
                    <ng-container *ngIf="capa !== 'estadistica' || relacion.origen !== 'ocupada'">
                        <plex-button [icon]="relacion.icon" [type]="relacion.color" size="sm"
                                     (click)="accion(relacion, $event)">
                        </plex-button>
                    </ng-container>
                </ng-container>
                <plex-button icon="pencil" type="warning" size="sm" (click)="goTo()">
                </plex-button>
                <plex-button title="volver" icon="arrow-left" type="info" size="sm" (click)="cancelar()">
                </plex-button>
            </plex-title>
            <fieldset>
                <plex-detail size="lg" direction="row">
                    <plex-icon name="{{ estadoCama.icon.substring(this.estadoCama.icon.indexOf('-') + 1) }}"
                               prefix="adi"></plex-icon>
                    <plex-badge [type]="estadoCama.color">
                        {{estadoCama.label}}
                    </plex-badge>
                    <plex-badge type="info">
                        {{ cama.esCensable ? 'Censable' : 'No Censable' }}
                    </plex-badge>
                    <plex-badge type="info">
                        {{ cama.genero.term === 'g√©nero masculino' ? 'Cama Masculina' : 'Cama Femenina' }}
                    </plex-badge>
                    <div [class]="'text-' + estadoCama.color" title>
                        {{ cama.nombre }}
                    </div>
                    <plex-label titulo="Unidad Organizativa" [subtitulo]="cama.unidadOrganizativa.term">
                    </plex-label>
                    <plex-label titulo="Especialidades" subtitulo="{{ cama.especialidades | enumerar: ['term'] }}">
                    </plex-label>
                    <plex-label titulo="Tipo de cama" [subtitulo]="cama.tipoCama.term"></plex-label>
                    <plex-label titulo="Sector" [subtitulo]="sector(cama)"></plex-label>
                </plex-detail>
            </fieldset>
        </ng-container>
        <ng-container *ngIf="cama.paciente">
            <plex-title size="sm" justify titulo="DATOS DE PACIENTE">
                <plex-button label="VER EPICRISIS" type="success" size="sm" (click)="verEpicrisis()">
                </plex-button>
            </plex-title>
            <fieldset>
                <plex-detail size="md" direction="row">
                    <plex-icon name="paciente" prefix="adi"></plex-icon>
                    <!-- <plex-badge type="cama.paciente">
                        {{ cama.paciente.estado }}
                    </plex-badge> -->
                    <div title>
                        {{ cama.paciente | nombre }}
                    </div>
                    <div subtitle>
                        {{ cama.paciente.documento }}
                    </div>
                    <plex-label titulo="Fecha de Nacimiento"
                                [subtitulo]="cama.paciente.fechaNacimiento | date: 'dd/MM/yyyy'">
                    </plex-label>
                </plex-detail>
            </fieldset>
        </ng-container>
    </plex-tab>
    <plex-tab *ngIf="capa === 'estadistica' && cama.paciente" label="INTERNACION">
        <app-internacion-detalle (toggleEditar)="onEdit($event)" (refresh)="refrescar($event)">
        </app-internacion-detalle>
    </plex-tab>
    <plex-tab label="HISTORIAL">
        <app-historial-detalle></app-historial-detalle>
    </plex-tab>
</plex-tabs>