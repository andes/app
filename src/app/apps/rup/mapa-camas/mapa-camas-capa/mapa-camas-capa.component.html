<plex-layout main="8">
    <plex-layout-main>
        <plex-title titulo="Mapa de Camas">
            <plex-button label="LISTADO DE INTERNACIÃ“N" type="primary"></plex-button>
            <plex-dropdown label="VER CENSO" type="primary" class="d-inline-block" [items]="itemsDropdown">
            </plex-dropdown>
            <plex-button label="VOLVER" type="danger"></plex-button>
        </plex-title>
        <app-filtros-camas *ngIf="unidadesOrganizativas && sectores && tiposCama"
                           [unidadesOrganizativas]="unidadesOrganizativas" [sectores]="sectores" [tiposCama]="tiposCama"
                           (filtrarTabla)="filtrarTabla($event)"></app-filtros-camas>
        <plex-title titulo="LISTADO DE CAMAS" size="sm">
            <plex-button label="AGREGAR CAMA" type="success" size="sm" (click)="agregarCama()"></plex-button>
            <plex-button icon="format-list-bulleted" type="primary" size="sm"></plex-button>
        </plex-title>
        <fieldset *ngIf="snapshot">
            <table class="table table-striped table-hover" *ngIf="estados">
                <tr>
                    <th></th>
                    <th>CAMA</th>
                    <th>PACIENTE</th>
                    <th>UNIDAD ORGANIZATIVA</th>
                    <th>ESTADO</th>
                    <th>ACCIONES</th>
                </tr>
                <tr app-item-cama *ngFor="let cama of camas | async" [cama]="cama" [estados]="estados"
                    [relaciones]="relaciones" [capa]="capa" (accionCama)="accionCama($event)">
                </tr>
            </table>
        </fieldset>
    </plex-layout-main>

    <plex-layout-sidebar type="invert" *ngIf="snapshot">
        <app-estado-servicio *ngIf="!selectedCama && !estadoDestino" [fecha]="fecha" [camas]="snapshot"
                             [estados]="estados" (buscarEstados)="getSnapshot($event)"></app-estado-servicio>
        <app-ingresar-paciente *ngIf="selectedCama && estadoDestino === 'ocupada'" [fecha]="fecha" [cama]="selectedCama"
                               (cancelIngreso)="cancelIngreso()"></app-ingresar-paciente>
    </plex-layout-sidebar>
</plex-layout>