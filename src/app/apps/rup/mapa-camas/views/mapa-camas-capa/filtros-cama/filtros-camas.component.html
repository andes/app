<form autosave="mapa-camas-filtros" (restore)="filtrar()">
    <plex-wrapper>
        <plex-select name="sector" label="Sector" [(ngModel)]="filtro.sector" idField="nombre" labelField="nombre"
                     [data]="sectorList$ | async" (change)="filtrar()">
        </plex-select>
        <plex-text name="paciente" type="text" [(ngModel)]="filtro.paciente" label="Paciente" debounce="400"
                   (change)="filtrar()">
        </plex-text>
        <plex-select name="unidadOrganizativa" label="Unidad Organizativa" [(ngModel)]="filtro.unidadOrganizativa"
                     idField="conceptId" labelField="term" [data]="unidadOrganizativaList$ | async"
                     (change)="filtrar()">
        </plex-select>
        <plex-select name="estado" label="Estado" [(ngModel)]="filtro.estado" idField="estado" labelField="estado"
                     [data]="estadoList$ | async" (change)="filtrar()">
        </plex-select>
        <plex-button class="collapse-button" type="primary" size="sm"
                     icon="{{ collapse ? 'chevron-down' : 'chevron-up'}}"
                     title="{{ collapse ? 'Expandir' : 'Colapsar'}}" titlePosition="left" (click)="colapsar()">
        </plex-button>

        <div [hidden]="collapse" class="w-100">
            <div class="d-flex">
                <plex-select name="tipo-cama" label="Tipo de Cama" [(ngModel)]="filtro.tipoCama" idField="conceptId"
                             labelField="term" (change)="filtrar()" [data]="tipoCamaList$ | async">
                </plex-select>
                <plex-select name="censable" label="Censable" [(ngModel)]="filtro.censable"
                             (change)="onCensableChange()" [data]="censables">
                </plex-select>
                <plex-select name="equipamiento" label="Equipamiento" [(ngModel)]="filtro.equipamiento"
                             idField="conceptId" labelField="term" (change)="filtrar()"
                             [data]="equipamientoList$ | async" multiple="true" grow="3">
                </plex-select>
                <plex-bool *ngIf="!filtro.censable" class="mt-4" label="Incluir No censables" name="activate"
                           type="slide" [(ngModel)]="mostrarTodasCamas" (change)="filtrar()">
                </plex-bool>
            </div>
        </div>
    </plex-wrapper>
</form>