<form #form="ngForm">
    <plex-title size="md" titulo="Uso de respirador">
        <plex-button label="" tooltip="Guardar" icon="check" type="success" size="sm" [disabled]="!form.valid"
                     (click)="accion()">
        </plex-button>
        <plex-button title="Volver" icon="arrow-left" type="danger" size="sm" (click)="accion(false)">
        </plex-button>
    </plex-title>

    <!-- No hay dispositivo en uso -->
    <ng-container *ngIf="!respirador">
        <plex-datetime [(ngModel)]="fechaDesde" name="fechaDesde" type="date" label="Fecha de carga"
                       [min]="startOfday(fechaIngreso)" [max]="hoy" [required]="true"></plex-datetime>
        <plex-select [(ngModel)]="dispositivo" label="Dispositivo" name="dispositivo"
                     placeholder="Seleccione un dispositivo" idField="_id" labelField="descripcion"
                     [data]="tipoDispositivos" [required]="true" grow="full">
        </plex-select>
    </ng-container>

    <ng-container *ngIf="respirador">
        <plex-label titulo="Dispositivo actual" subtitulo="{{ respirador.dispositivo?.descripcion }}">
        </plex-label>
        <plex-label titulo="Fecha de carga" subtitulo="{{ respirador.fechaDesde | fecha }}"></plex-label>
        <plex-datetime [(ngModel)]="respirador.fechaHasta" name="fechaHasta" type="date" label="Fecha de retiro"
                       [min]="startOfday(respirador.fechaDesde)" [max]="endOfDay(hoy)" [required]="true">
        </plex-datetime>
    </ng-container>
</form>