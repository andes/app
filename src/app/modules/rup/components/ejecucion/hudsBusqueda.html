<!-- MAESTRO DE PROBLEMAS - BD:tipoProblema -->
<div class="menu-buscador">
    <plex-loader class="float-right" *ngIf="loading" type="ball-pulse"></plex-loader>
    <!-- Botones filtros  -->
    <div class="container-filtros">
        <ul class="botones-filtros">
            <li>
                <small *ngIf="getCantidadResultados('planes')" class="contador badge-solicitud ml-1 float-right"
                       [ngClass]="{'active': filtroActual === 'planes'}">{{
                    getCantidadResultados('planes')}}</small>
                <button (click)="filtroBuscador('planes')" class="btn btn-block p-0 btn-solicitud"
                        [ngClass]="{'active': filtroActual === 'planes'}">
                    <i class="adi adi-clipboard-check-outline"></i>
                    PRESTACIONES
                </button>
            </li>
            <li>
                <small *ngIf="getCantidadResultados('solicitudes')" class="contador badge-solicitud ml-1 float-right"
                       [ngClass]="{'active': filtroActual === 'solicitudes'}">{{
                    getCantidadResultados('solicitudes')}}</small>
                <button (click)="filtroBuscador('solicitudes')" [ngClass]="{'active': filtroActual === 'solicitudes'}"
                        class="btn btn-block p-0 btn-solicitud">
                    <i class="adi adi-mano-corazon"></i>
                    SOLICITUDES
                </button>
            </li>
            <li>
                <small *ngIf="getCantidadResultados('hallazgo')" class="contador badge-hallazgo ml-1 float-right"
                       [ngClass]="{'active': filtroActual === 'hallazgo'}">{{
                    getCantidadResultados('hallazgo')}}</small>
                <button (click)="filtroBuscador('hallazgo')" [ngClass]="{'active': filtroActual === 'hallazgo'}"
                        class="btn btn-block p-0 btn-hallazgo" (click)="buscar()">
                    <i class="adi adi-lupa-ojo"></i>
                    HALLAZGOS
                </button>
            </li>
            <li>
                <small *ngIf="getCantidadResultados('trastorno')" class="contador badge-trastorno ml-1 float-right"
                       [ngClass]="{'active': filtroActual === 'trastorno'}">{{
                    getCantidadResultados('trastorno')}}</small>
                <button (click)="filtroBuscador('trastorno')" [ngClass]="{'active': filtroActual === 'trastorno'}"
                        class="btn btn-block p-0 btn-trastorno" (click)="buscar()">
                    <i class="adi adi-trastorno"></i>
                    TRASTORNOS
                </button>
            </li>
            <li>
                <small *ngIf="getCantidadResultados('procedimiento')"
                       class="contador badge-procedimiento ml-1 float-right"
                       [ngClass]="{'active': filtroActual === 'procedimiento'}">{{
                    getCantidadResultados('procedimiento')}}</small>
                <button (click)="filtroBuscador('procedimiento')"
                        [ngClass]="{'active': filtroActual === 'procedimiento'}"
                        class="btn btn-block p-0 btn-procedimiento" (click)="buscar()">
                    <i class="adi adi-termometro"></i>
                    PROC.
                </button>
            </li>
            <li>
                <small *ngIf="getCantidadResultados('producto')" class="contador badge-producto ml-1 float-right"
                       [ngClass]="{'active': filtroActual === 'producto'}">{{
                    getCantidadResultados('producto')}}</small>
                <button (click)="filtroBuscador('producto')" [ngClass]="{'active': filtroActual === 'producto'}"
                        class="btn btn-block p-0 btn-producto" (click)="buscar()">
                    <i class="adi adi-pildoras"></i>
                    PRODUCTOS
                </button>
            </li>
            <li>
                <small *ngIf="getCantidadResultados('laboratorios')" class="contador badge-otro ml-1 float-right"
                       [ngClass]="{'active': filtroActual === 'laboratorios'}">{{
                    getCantidadResultados('laboratorios')}}</small>
                <button (click)="filtroBuscador('laboratorios')" [ngClass]="{'active': filtroActual === 'laboratorios'}"
                        class="btn btn-block p-0 btn-laboratorio">
                    <i class="adi adi-recipiente"></i>
                    LABOS
                </button>
            </li>
            <li>
                <small *ngIf="getCantidadResultados('vacunas')" class="contador badge-vacuna ml-1 float-right"
                       [ngClass]="{'active': filtroActual === 'vacunas'}">{{ getCantidadResultados('vacunas') }}</small>
                <button (click)="filtroBuscador('vacunas')" [ngClass]="{'active': filtroActual === 'vacunas'}"
                        class="btn btn-block p-0 btn-vacuna">
                    <i class="adi adi-vacuna"></i>
                    VACUNAS
                </button>
            </li>
            <ng-container *feature="'ips'">
                <li *ngIf="dominios$ | async as dominios">
                    <small *ngIf="getCantidadResultados('dominios')" class="contador badge-dominiosNac ml-1 float-right"
                           [ngClass]="{'active': filtroActual === 'dominios'}">
                        {{ getCantidadResultados('dominios') }}
                    </small>
                    <button (click)="filtroBuscador('dominios')" [ngClass]="{'active': filtroActual === 'dominios'}"
                            class="btn btn-block p-0 btn-dominiosNac">
                        <i class="adi adi-hospital"></i>
                        DOMINIOS NACIONALES
                    </button>
                </li>
            </ng-container>
        </ul>
    </div>
    <div class="grow" *ngIf="filtroActual === 'planes'">
        <div class="row">
            <div class="btn-group col botonera historial" role="group" aria-label="Botonera principal">
                <button class="btn btn-primary btn-sm btn-block m-0" (click)="setAmbitoOrigen('ambulatorio')"
                        [class.active]="ambitoOrigen === 'ambulatorio'">
                    AMBULATORIO
                </button>
                <button class="btn btn-primary btn-sm btn-block m-0" (click)="setAmbitoOrigen('internacion')"
                        [class.active]="ambitoOrigen === 'internacion'">
                    INTERNACION
                </button>
                <plex-button type="info" size="sm" [icon]="showFiltros ? 'chevron-up' : 'chevron-down'"
                             [tooltip]="showFiltros ? 'Cerrar filtros' : 'Ver filtros'" (click)="toogleFiltros()">
                </plex-button>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <small class="pr-1" *ngIf="getSemanticTagFiltros()">Filtros:</small>
            <i class="text-secondary ml-1">{{ getSemanticTagFiltros() }}</i>
        </div>

    </div>

</div>
<div class="mt-1"
     *ngIf="filtroActual !== 'solicitudes' && filtroActual !== 'planes' && filtroActual !== 'laboratorios' && filtroActual !== 'vacunas' && filtroActual !== 'dominios'">
    <plex-text [(ngModel)]="searchTerm" name="searchTerm" (change)="buscar()" placeholder="Buscar registros..."
               [autoFocus]="true">
    </plex-text>

    <div class="my-2" *ngIf="filtroActual === 'trastorno' && registrosTotales.trastorno.length">
        <plex-bool [(ngModel)]="filtroTrastornos" name="filtroTrastornos" (change)="filtrarTrastornos()" type="slide"
                   label="{{filtroTrastornos ? 'Activos' : 'Todos'}}">
        </plex-bool>
    </div>
</div>
<div class="row huds-busqueda">
    <div class="col">

        <!-- Vista: SOLICITUDES -->
        <ng-container *ngIf="filtroActual === 'solicitudes'">
            <ul class="hover conceptos list-unstyled">

                <ng-container *ngFor="let registro of solicitudesMezcladas; let iPrestacion = index">
                    <li>
                        <div class="rup-card mini procedimiento"
                             [ngClass]="{'active': huds.isOpen(registro, 'concepto'), 'solicitud': true}"
                             (click)="clickSolicitud(registro, iPrestacion)">

                            <div class="rup-header">
                                <div class="rup-border rup-border-procedimiento"
                                     [ngClass]="{'active': huds.isOpen(registro, 'concepto'), 'rup-border-plan': true}">
                                    <div class="row p-0 m-0 border-secondary border-left-0">
                                        <div class="col-10 p-0 m-0">
                                            <div class="row m-0 p-0">
                                                <div class="col-2 icon-rup drag-handle">
                                                    <i class='adi adi-mano-corazon'></i>
                                                </div>
                                                <div class="col p-0 pl-2 float-left">
                                                    <ng-container *ngIf='registro.evoluciones'>
                                                        {{ registro.concepto.term }}</ng-container>
                                                    <ng-container *ngIf='!registro.evoluciones'>
                                                        {{ registro.solicitud.tipoPrestacion.term }}
                                                    </ng-container>
                                                    <div class="row p-0 m-0">
                                                        <div class="col-10 p-0 m-0">
                                                            <div class="sugerido">
                                                                <small>Creada:
                                                                    <ng-container *ngIf='registro.evoluciones'>
                                                                        {{ registro.evoluciones[0].fechaCarga | fecha }}
                                                                    </ng-container>
                                                                    <ng-container *ngIf='!registro.evoluciones'>
                                                                        {{ registro.createdAt | fecha }}</ng-container>
                                                                </small>
                                                                <br>
                                                                <small>Profesional:
                                                                    <ng-container *ngIf='registro.evoluciones'>
                                                                        {{ registro.evoluciones[0].profesional }}
                                                                    </ng-container>
                                                                    <ng-container *ngIf='!registro.evoluciones'>
                                                                        {{ registro.solicitud.profesionalOrigen | nombre
                                                                        }}
                                                                    </ng-container>
                                                                </small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-2 p-0 m-0">
                                            <div class="p-0 pt-1 pr-1 float-right">
                                                <plex-badge size="sm"
                                                            [type]="registro.estadoActual.tipo === 'validada' ? 'success' :'info'"
                                                            *ngIf="registro.estadoActual">
                                                    {{ registro.estadoActual.tipo }}
                                                    <plex-button *ngIf='registro.evoluciones' size="sm" type="info"
                                                                 icon="information-outline"
                                                                 title="Registrado por profesional"
                                                                 titlePosition="left">
                                                    </plex-button>
                                                    <plex-button *ngIf='!registro.evoluciones' size="sm" type="info"
                                                                 icon="information-outline"
                                                                 title="Registrado por gestión" titlePosition="left">
                                                    </plex-button>
                                                </plex-badge>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </ng-container>
            </ul>
        </ng-container>

        <!-- Vista: HALLAZGOS -->
        <ng-container *ngIf="filtroActual === 'hallazgo'">
            <ul *ngIf="registrosTotales.hallazgo" class="hover conceptos list-unstyled">
                <ng-container *ngFor="let registro of registrosTotales.hallazgo ; let iConcepto = index">
                    <li>
                        <div class="rup-card mini hallazgo"
                             [ngClass]="{'active': huds.isOpen(registro, 'concepto'), 'solicitud': registro.esSolicitud}"
                             (click)="emitTabs(registro, 'concepto', iConcepto)">
                            <div class="rup-header">
                                <div class="rup-border rup-border-hallazgo"
                                     [ngClass]="{'active': huds.isOpen(registro, 'concepto'), 'rup-border-plan': registro.esSolicitud}">
                                    <div class="row p-0 m-0 border-secondary border-left-0">
                                        <div class="col-10 p-0 m-0">
                                            <div class="row m-0 p-0">
                                                <div class="col-2 icon-rup drag-handle">
                                                    <i class="adi adi-lupa-ojo"></i>
                                                </div>
                                                <div class="col p-0 pl-2 float-left">
                                                    {{ registro.concepto.term }}
                                                    <div class="row p-0 m-0">
                                                        <div class="col-10 p-0 m-0">
                                                            <div class="sugerido">
                                                                <small>Prestación:
                                                                    {{ registro.tipoPrestacion }}
                                                                </small>
                                                                <br>
                                                                <small>
                                                                    Creada:
                                                                    {{ registro.fechaEjecucion | fecha }}</small>
                                                                <br>
                                                                <small>Profesional: {{
                                                                    registro.evoluciones[0].profesional}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-2 p-0 m-0">
                                            <div class="p-0 pt-1 pr-1 float-right">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </ng-container>
            </ul>
        </ng-container>

        <!-- Vista: TRASTORNOS -->
        <ng-container *ngIf="filtroActual === 'trastorno'">
            <ul *ngIf="registrosTotales.trastorno" class="hover conceptos list-unstyled" cdkDropList>
                <ng-container *ngFor="let registro of registrosTotales.trastorno; let iConcepto = index">
                    <li>
                        <div class="rup-card mini trastorno"
                             [ngClass]="{'active': huds.isOpen(registro, 'concepto'), 'solicitud': registro.esSolicitud}"
                             (click)="emitTabs(registro, 'concepto', iConcepto)">
                            <div class="rup-header">
                                <div class="rup-border rup-border-trastorno"
                                     [ngClass]="{'active': huds.isOpen(registro, 'concepto'), 'rup-border-plan': registro.esSolicitud}">
                                    <div class="row p-0 m-0 border-secondary border-left-0">
                                        <div class="col-10 p-0 m-0">
                                            <div class="row m-0 p-0">
                                                <div class="icon-rup drag-handle p-0 pt-1" draggable
                                                     [dragScope]="'registros-rup'" [dragData]="registro.concepto"
                                                     (onDragStart)="dragStart($event)" (onDragEnd)="dragEnd($event)">
                                                    <i class="adi adi-trastorno"></i>
                                                </div>
                                                <div class="col p-0 pl-2 float-left">
                                                    {{ registro.concepto.term }}
                                                    <div class="row p-0 m-0">
                                                        <div class="col-10 p-0 m-0">
                                                            <div class="sugerido">
                                                                <small>Prestación:
                                                                    {{ registro.evoluciones[0].tipoPrestacion }}</small>
                                                                <br>
                                                                <small>Última evolución:
                                                                    {{ registro.evoluciones[0].fechaCarga | fecha
                                                                    }}</small>
                                                                <br>
                                                                <small>Profesional:
                                                                    {{ registro.evoluciones[0].profesional }}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-2 p-0 m-0">
                                            <div class="p-0 pt-1 pr-1 float-right">
                                                <ng-container *ngIf="registro.evoluciones">
                                                    <plex-badge size="sm"
                                                                [type]="registro.evoluciones[0].estado === 'activo' ? 'danger' : 'info'">
                                                        {{ registro.evoluciones[0].estado }}
                                                    </plex-badge>
                                                </ng-container>
                                                <button class="btn btn-sm btn-primary btn-icon-rup p-0"
                                                        *ngIf="emitirConceptos && registro?.evoluciones[0]?.estado !== 'resuelto' "
                                                        (click)="$event.stopPropagation(); agregarRegistro(registro)"
                                                        title="Agregar a la consulta" titlePosition="left">
                                                    <i class="mdi mdi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </ng-container>
            </ul>
        </ng-container>

        <!-- Vista: PROCEDIMIENTOS -->
        <ng-container *ngIf="filtroActual === 'procedimiento'">
            <ul *ngIf="registrosTotales.procedimiento" class="hover conceptos list-unstyled">
                <ng-container *ngFor="let registro of registrosTotales.procedimiento; let iPrestacion = index">
                    <li>
                        <div class="rup-card mini procedimiento"
                             [ngClass]="{'active': huds.isOpen(registro, 'concepto'), 'solicitud': registro.esSolicitud}"
                             (click)="emitTabs(registro, 'concepto', iPrestacion)">
                            <div class="rup-header">
                                <div class="rup-border rup-border-procedimiento"
                                     [ngClass]="{'active': huds.isOpen(registro, 'concepto'), 'rup-border-plan': registro.esSolicitud}">
                                    <div class="row p-0 m-0 border-secondary border-left-0">
                                        <div class="col-10 p-0 m-0">
                                            <div class="row m-0 p-0">
                                                <div class="col-2 icon-rup drag-handle">
                                                    <i class="adi" [class.adi-termometro]="!registro.isSolicitud"
                                                       [class.adi-mano-corazon]="registro.esSolicitud"></i>
                                                </div>
                                                <div class="col p-0 pl-2 float-left">
                                                    {{ registro.concepto.term }}
                                                    <div class="row p-0 m-0">
                                                        <div class="col-10 p-0 m-0">
                                                            <div class="sugerido">
                                                                <small>Prestación:
                                                                    {{ registro.tipoPrestacion }}
                                                                </small>
                                                                <br>
                                                                <small>Creada:
                                                                    {{ registro.fechaEjecucion | fecha }}</small>
                                                                <br>
                                                                <small>Profesional: {{
                                                                    registro.evoluciones[0].profesional}}</small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-2 p-0 m-0">
                                            <div class="p-0 pt-1 pr-1 float-right">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </ng-container>
            </ul>
        </ng-container>

        <!-- Vista: PLANES -->
        <ng-container *ngIf="filtroActual === 'planes'">
            <ng-container *ngIf="showFiltros">
                <div class="row">
                    <div class="col-12">
                        <plex-select [(ngModel)]="prestacionSeleccionada" label="Prestación" [data]="tiposPrestacion"
                                     idField="conceptId" labelField="term" (change)="filtrar()" [multiple]="true">
                        </plex-select>
                    </div>
                </div>
                <div *ngIf="!efectorRestringido" class="row">
                    <div class="col-12">
                        <plex-select [(ngModel)]="organizacionSeleccionada" label="Organización" [data]="organizaciones"
                                     idField="id" labelField="nombre" (change)="filtrar()">
                        </plex-select>
                    </div>
                </div>
                <div class="row pb-2">
                    <div class="col-6">
                        <plex-datetime type="date" [(ngModel)]="fechaInicio" (change)="filtrar()" name="fechaInicio"
                                       label="Fecha Desde" [debounce]="400">
                        </plex-datetime>
                    </div>
                    <div class="col-6">
                        <plex-datetime type="date" [(ngModel)]="fechaFin" (change)="filtrar()" name="fechaFin"
                                       label="Fecha Hasta" [debounce]="400">
                        </plex-datetime>
                    </div>
                </div>
            </ng-container>

            <ul *ngIf="prestaciones" class="hover conceptos list-unstyled">
                <ng-container *ngFor="let prestacion of prestaciones; let iPrestacion = index">
                    <li>
                        <div class="rup-card mini solicitud"
                             [ngClass]="{'active': huds.isOpen(prestacion.data, prestacion.tipo)}"
                             (click)="emitTabs(prestacion, prestacion.tipo, iPrestacion)">
                            <div class="rup-header">
                                <div class="rup-border rup-border-solicitud"
                                     [ngClass]="{'active': huds.isOpen(prestacion.data, prestacion.tipo)}">
                                    <div class="row p-0 m-0 border-secondary border-left-0">
                                        <div class="col-10 p-0 m-0">
                                            <div class="row m-0 p-0">
                                                <div class="col-2 icon-rup drag-handle">
                                                    <i class="adi adi-clipboard-check-outline"></i>
                                                </div>
                                                <div class="col p-0 pl-2 float-left">
                                                    {{ prestacion.prestacion.term }}
                                                    <div class="row p-0 m-0">
                                                        <div class="col-10 p-0 m-0">
                                                            <div class="sugerido">
                                                                <small *ngIf="prestacion.data.ejecucion">
                                                                    Fecha:
                                                                    {{ prestacion.data.ejecucion.fecha | fecha }}
                                                                </small>
                                                                <small *ngIf="!prestacion.data.ejecucion">
                                                                    Fecha:
                                                                    {{ prestacion.fecha | fecha }}
                                                                </small>
                                                                <br>
                                                                <small>
                                                                    Profesional:
                                                                    {{ prestacion.profesional }}
                                                                </small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-2 p-0 m-0">
                                            <div class="p-0 pt-1 pr-1 float-right">
                                                <plex-badge size="sm"
                                                            [type]=" prestacion.tipo !== 'ficha-epidemiologica' ? 'success' : 'info'">
                                                    {{prestacion.estado}}
                                                </plex-badge>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </ng-container>
            </ul>
        </ng-container>

        <!-- Vista: PRODUCTOS -->
        <ng-container *ngIf="filtroActual === 'producto'">
            <ul *ngIf="registrosTotales.producto" class="conceptos hover list-unstyled">
                <ng-container *ngFor="let registro of this.registrosTotales.producto; let iCronico = index">
                    <li>
                        <div class="rup-card mini producto" [ngClass]="{'active': huds.isOpen(registro, 'concepto')}">
                            <div class="rup-header">
                                <div class="rup-border rup-border-producto">
                                    <div class="row p-0 m-0 border-secondary border-left-0">
                                        <div class="col-10 p-0 m-0">
                                            <div class="row m-0 p-0">
                                                <ng-container>
                                                    <div class="icon-rup">
                                                        <i class="adi adi-pildoras"></i>
                                                    </div>
                                                </ng-container>
                                                <div class="col p-0 pl-2 float-left"
                                                     (click)="emitTabs(registro, 'concepto',iCronico)">
                                                    {{ registro.concepto.term }}
                                                    <div class="row p-0 m-0">
                                                        <div class="col-10 p-0 m-0">
                                                            <ng-container *ngIf="registro.evoluciones">
                                                                <small class="sugerido">Prestación:
                                                                    {{ registro.tipoPrestacion }}
                                                                </small>
                                                                <br>
                                                                <small class="sugerido">
                                                                    último registro:
                                                                    {{ registro.fechaEjecucion | fecha }}
                                                                </small>
                                                            </ng-container>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-2 p-0 m-0">
                                            <div class="p-0 pt-1 pr-1 float-right">
                                                <ng-container *ngIf="registro.evoluciones">
                                                    <plex-badge size="sm"
                                                                type="{{ registro.evoluciones[registro.evoluciones.length-1].estado === 'activo' ? 'danger' : 'info' }}">
                                                        {{ registro.evoluciones[registro.evoluciones.length-1].estado }}
                                                    </plex-badge>
                                                </ng-container>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </ng-container>
            </ul>
            <div *ngIf="registrosTotales.producto.length === 0">No hay medicamentos registrados</div>
        </ng-container>


        <!-- Vista: LABORATORIOS -->
        <ng-container *ngIf="filtroActual === 'laboratorios'">
            <div *ngIf="laboratorios && laboratorios.length > 0" class="conceptos hover list-unstyled">
                <ul class="conceptos list-unstyled">
                    <ng-container *ngFor="let laboratorio of laboratorios; let iLaboratorio = index">
                        <li>
                            <div class="rup-card mini laboratorio"
                                 [ngClass]="{'active': huds.isOpen(laboratorio.data, 'cda')}">
                                <div class="rup-header">
                                    <div class="rup-border rup-border-laboratorio">
                                        <div class="row p-0 m-0 border-secondary border-left-0">
                                            <div class="col-10 p-0 m-0">
                                                <div class="row m-0 p-0">
                                                    <ng-container>
                                                        <div class="icon-rup">
                                                            <i class="adi adi-recipiente"></i>
                                                        </div>
                                                    </ng-container>
                                                    <div class="col p-0 pl-2 float-left"
                                                         (click)="emitTabs(laboratorio, 'cda', iLaboratorio)">
                                                        {{ laboratorio?.prestacion.term }}
                                                        <div class="row p-0 m-0">
                                                            <div class="col-10 p-0 m-0">
                                                                <div class="text-sm">
                                                                    Solicitante:
                                                                    {{laboratorio?.profesional?.nombre}}
                                                                </div>
                                                                <div class="text-sm">
                                                                    Organización:
                                                                    {{laboratorio?.data.organizacion?.nombre }}
                                                                </div>
                                                                <small class="sugerido">
                                                                    Fecha: {{laboratorio?.fecha | fecha}}
                                                                </small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ng-container>
                </ul>
                <div *ngIf="laboratorios.length === 0">No hay Laboratorios registrados</div>
            </div>
        </ng-container>

        <!-- Vista: VACUNAS -->
        <ng-container *ngIf="filtroActual === 'vacunas'">
            <div *ngIf="vacunas && vacunas.length > 0" class="conceptos hover list-unstyled">

                <ul class="conceptos list-unstyled">
                    <ng-container *ngFor="let unaVacuna of vacunas; let iVacuna = index">
                        <li>
                            <div class="rup-card mini vacuna" [ngClass]="{'active': huds.isOpen(unaVacuna, 'cda')}">
                                <div class="rup-header">
                                    <div class="rup-border rup-border-vacuna">

                                        <div class="row p-0 m-0 border-secondary border-left-0">
                                            <div class="col-10 p-0 m-0">
                                                <div class="row m-0 p-0">
                                                    <ng-container>
                                                        <div justify="center" class="icon-rup">
                                                            <i class="adi adi-vacuna"></i>
                                                        </div>
                                                    </ng-container>
                                                    <div class="col p-0 pl-2 float-left"
                                                         (click)="emitTabs(unaVacuna, 'cda', iVacuna)">
                                                        {{ unaVacuna?.prestacion.term }}
                                                        <div class="row p-0 m-0">
                                                            <div class="col-10 p-0 m-0">
                                                                <ng-container *ngIf="unaVacuna">
                                                                    <div class="text-sm">Profesional:
                                                                        <ng-container *ngIf="unaVacuna?.profesional">
                                                                            {{unaVacuna?.profesional?.nombre}}
                                                                        </ng-container>
                                                                    </div>
                                                                    <small class="sugerido">Fecha: {{unaVacuna?.fecha |
                                                                        fecha}}
                                                                    </small>
                                                                </ng-container>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ng-container>
                </ul>
                <div *ngIf="vacunas && vacunas.length === 0">No hay vacunas registradas</div>
            </div>
        </ng-container>
        <!-- Vista: DOMINIOS NACIONALES -->
        <ng-container *ngIf="filtroActual === 'dominios'">
            <div *ngIf="dominios && dominios.length > 0" class="conceptos hover list-unstyled">
                <ul class="conceptos list-unstyled">
                    <ng-container *ngFor="let unDominio of dominios; let iDominio = index">
                        <li>
                            <div class="rup-card mini dominiosNac"
                                 [ngClass]="{'active': huds.isOpen(unDominio, 'dominio')}">
                                <div class="rup-header">
                                    <div class="rup-border rup-border-otro">
                                        <div class="row p-0 m-0 border-secondary border-left-0">
                                            <div class="col-10 p-0 m-0">
                                                <div class="row m-0 p-0">
                                                    <ng-container>
                                                        <div justify="center" class="icon-rup">
                                                            <i class="adi adi-hospital"></i>
                                                        </div>
                                                    </ng-container>
                                                    <div class="col p-0 pl-2 float-left"
                                                         (click)="emitTabs(unDominio, 'dominio', iDominio)">
                                                        <small>Registro Nacional</small>
                                                        <div class="row p-0 m-0">
                                                            <div class="col-10 p-0 m-0">
                                                                <ng-container *ngIf="unDominio">
                                                                    <div class="text-sm">
                                                                        Identificador:
                                                                        <ng-container *ngIf="unDominio?.id">
                                                                            {{unDominio?.id}}
                                                                        </ng-container>
                                                                    </div>
                                                                    <div class="text-sm">
                                                                        Dominio:
                                                                        <ng-container *ngIf="unDominio?.name">
                                                                            {{unDominio?.name}}
                                                                        </ng-container>
                                                                    </div>

                                                                </ng-container>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ng-container>
                </ul>
                <div *ngIf="dominio && dominio.length === 0">No se encontraron dominios para este paciente</div>
            </div>
        </ng-container>
    </div>
</div>