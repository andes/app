<form class="plex-layout" #form="ngForm">
    <section>
        <plex-box>
            <header>
                <div class="page-title">Registrar una prestación</div>
            </header>
            <div class="row">
                <div class="col-6">
                    <fieldset>
                        <!-- Búsqueda de pacientes -->
                        <plex-button label="BUSCAR PACIENTE" type="primary" (click)="buscandoPaciente = true"></plex-button>
                        <pacientesSearch *ngIf="buscandoPaciente" (selected)="onPacienteSelected($event)" (cancel)="onPacienteCancel()" [mostrarCancelar]="true"
                            [modoCompleto]="false" [bloquearCreate]="true" [btnCancelarLabel]="btnCancelarLabel"></pacientesSearch>
                        <legend>Paciente</legend>
                        <paciente-detalle *ngIf="paciente" [paciente]="paciente" [size]="'small'"></paciente-detalle>
                    </fieldset>
                </div>
                <div class="col-6">
                    <fieldset>
                        <legend>Prestación</legend>
                        <plex-datetime type="datetime" [(ngModel)]="fecha" [required]="true" name="fecha" label="Fecha y hora de la prestación">
                        </plex-datetime>
                        <plex-select [(ngModel)]="tipoPrestacionSeleccionada" name="nombrePrestacion" label="Tipo de prestación" labelField="term"
                            [data]="tiposPrestacion" [required]="true">
                        </plex-select>
                    </fieldset>
                </div>
            </div>
        </plex-box>
    </section>

    <!--Footer-->
    <footer *ngIf="!buscandoPaciente">
        <div class="float-left">
            <plex-button type="danger" label="PUNTO DE INICIO" (click)="cancelar()">
            </plex-button>
        </div>
        <div class="float-right">
            <plex-button [disabled]="!form.valid || !paciente" label="INICIAR PRESTACIÓN" validateForm="true" type="success" (click)="guardar(form.valid)">
            </plex-button>
        </div>
    </footer>
</form>
